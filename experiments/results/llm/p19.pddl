To solve this problem, we can use a combination of the pickup, putdown, stack, and unstack actions to rearrange the blocks according to the given goal. Here is an optimal plan to solve the problem:

1. Unstack b12 from b4 and put it on the table.
2. Unstack b6 from b12 and put it on the table.
3. Stack b6 on top of b12.
4. Unstack b9 from b2 and put it on the table.
5. Unstack b5 from b7 and put it on the table.
6. Stack b9 on top of b2.
7. Stack b5 on top of b10.
8. Unstack b8 from b3 and put it on the table.
9. Stack b8 on top of b10.
10. Unstack b7 from b11 and put it on the table.
11. Stack b7 on top of b4.
12. Stack b11 on top of b7.

After following this plan, the blocks will be rearranged according to the given goal:
b5 is on top of b10. 
b6 is on top of b12. 
b7 is on top of b4. 
b8 is on top of b3. 
b9 is on top of b2. 
b10 is on top of b8. 
b11 is on top of b7. 
b12 is on top of b11.