To find an optimal plan to solve the problem, we can use a planning algorithm such as the STRIPS algorithm. Here is an optimal plan to move the blocks to achieve the desired goal:

1. Unstack b5 from b1 and put it on the table.
2. Unstack b3 from b1 and put it on the table.
3. Unstack b1 from b2 and put it on the table.
4. Pickup b5 from the table.
5. Stack b5 on top of b6.
6. Pickup b3 from the table.
7. Stack b3 on top of b5.
8. Pickup b1 from the table.
9. Stack b1 on top of b4.
10. Pickup b9 from b4.
11. Stack b9 on top of b1.
12. Unstack b4 from b6 and put it on the table.
13. Pickup b5 from b6.
14. Stack b5 on top of b3.
15. Pickup b1 from b4.
16. Stack b1 on top of b2.
17. Pickup b7 from b8.
18. Stack b7 on top of b2.

The above plan ensures that all the blocks are moved according to the desired goal configuration.